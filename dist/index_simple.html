<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGP Simulator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #004E89 0%, #003a5f 100%);
            color: #2C3E50;
            min-height: 100vh;
            padding: 20px;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        header {
            background: white;
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        h1 { font-size: 2.5em; color: #FF6B35; margin-bottom: 10px; }
        .subtitle { color: #7F8C8D; font-size: 1em; margin-top: 10px; }

        .section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #004E89;
            font-size: 1.5em;
            margin-bottom: 20px;
            border-left: 4px solid #FF6B35;
            padding-left: 15px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .demo-card {
            background: linear-gradient(135deg, rgba(26, 200, 237, 0.1) 0%, rgba(255, 107, 53, 0.1) 100%);
            border: 2px solid #1AC8ED;
            padding: 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(26, 200, 237, 0.2);
        }

        .demo-card h3 {
            color: #FF6B35;
            font-size: 1.3em;
            margin-bottom: 8px;
        }

        .demo-card p {
            color: #7F8C8D;
            margin-bottom: 15px;
        }

        button {
            background: #FF6B35;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            width: 100%;
        }

        button:hover { background: #e55a24; transform: translateY(-2px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        .results {
            background: #F8F9FA;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #2ECC71;
        }

        .stat {
            display: inline-block;
            background: linear-gradient(135deg, #1AC8ED 0%, #004E89 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 6px;
            margin: 10px 10px 10px 0;
            text-align: center;
        }

        .stat-value { font-size: 1.8em; font-weight: 700; }
        .stat-label { font-size: 0.9em; opacity: 0.9; }

        .info-text {
            background: #E8F4F8;
            border-left: 4px solid #1AC8ED;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            color: #004E89;
        }

        footer {
            background: white;
            padding: 20px;
            text-align: center;
            border-radius: 12px;
            color: #7F8C8D;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>BGP Simulator</h1>
            <p>Autonomous System Routing Simulation</p>
            <p class="subtitle">Powered by WebAssembly</p>
        </header>

        <main>
            <section class="section">
                <h2>Quick Demo - Select a Scenario</h2>
                <p style="color: #7F8C8D; margin-bottom: 20px;">Choose a preset network topology to see how BGP routing works:</p>

                <div class="demo-grid" id="demoGrid">
                    <!-- Demo cards will be generated here -->
                </div>

                <div id="resultsSection" class="hidden">
                    <div class="results">
                        <h3 id="resultTitle" style="color: #004E89; margin-bottom: 15px;">Simulation Results</h3>

                        <div id="statsContainer"></div>

                        <div class="info-text">
                            <strong>Simulation:</strong> <span id="simName"></span>
                        </div>

                        <div class="info-text">
                            <strong>Target ASN:</strong> <span id="targetASN"></span>
                        </div>

                        <h4 style="color: #004E89; margin-top: 20px; margin-bottom: 10px;">Network Topology</h4>
                        <pre id="topologyInfo" style="background: #F8F9FA; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 0.9em;"></pre>

                        <h4 style="color: #004E89; margin-top: 20px; margin-bottom: 10px;">Announcements</h4>
                        <pre id="announcementsInfo" style="background: #F8F9FA; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 0.9em;"></pre>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>About BGP</h2>
                <p style="line-height: 1.8; color: #555;">
                    The Border Gateway Protocol (BGP) is the routing protocol used on the internet to exchange routing information between autonomous systems (ASes).
                    This simulator demonstrates how BGP routing works by showing how different network topologies and announcements affect route propagation.
                </p>
                <p style="line-height: 1.8; color: #555; margin-top: 10px;">
                    Select a demo scenario above to see an example of BGP routing in action.
                </p>
            </section>
        </main>

        <footer>
            <p>BGP Simulator v1.0 | <a href="https://github.com/ajimenezvargas/3150-final-project" style="color: #FF6B35; text-decoration: none;">GitHub</a></p>
        </footer>
    </div>

    <script>
        // Preset simulation data
        const SIMULATIONS = [
            {
                name: "Tech Giants Network",
                description: "Simulates BGP routing between major tech companies",
                caida: `# AS Relationships (asn1|asn2|relationship: -1=customer, 0=peer, 1=provider)
15169|174|0
15169|3356|0
15169|6453|0
8452|15169|-1
8452|174|0
8452|3356|0
1239|174|1
1239|3356|0
6939|174|0
6939|3356|0
701|174|-1
701|3356|-1
3320|174|1
3320|3356|1
13335|174|0
13335|3356|0
13335|15169|0
6762|174|0
6762|3356|0
12389|15169|-1
12389|174|0
12389|3356|0`,
                announcements: `origin_asn,prefix,rov_invalid
15169,8.8.8.0/24,false
15169,8.8.4.0/24,false
13335,1.1.1.0/24,false
13335,1.0.0.0/24,false
174,38.0.0.0/8,false
3356,67.0.0.0/8,false
701,206.0.0.0/8,false`,
                targetAsns: [174, 3356, 701]
            },
            {
                name: "Academic Network",
                description: "Simulates BGP routing across university networks",
                caida: `# AS Relationships (asn1|asn2|relationship: -1=customer, 0=peer, 1=provider)
1|2|1
2|3|0
2|4|0
3|4|0
5|2|-1
5|4|-1
6|1|-1
6|3|0
7|4|-1
8|2|-1
9|3|-1`,
                announcements: `origin_asn,prefix,rov_invalid
1,192.168.1.0/24,false
2,192.168.2.0/24,false
3,192.168.3.0/24,false
4,192.168.4.0/24,false
5,192.168.5.0/24,false
6,192.168.6.0/24,false`,
                targetAsns: [2, 4, 5]
            },
            {
                name: "Regional ISP Network",
                description: "Simulates routing in a regional internet service provider",
                caida: `# AS Relationships (asn1|asn2|relationship: -1=customer, 0=peer, 1=provider)
64500|64501|-1
64500|64502|-1
64501|64502|0
64502|64503|1
64502|64504|1
64505|64501|-1
64505|64502|0
64506|64500|-1
64506|64501|0`,
                announcements: `origin_asn,prefix,rov_invalid
64500,10.0.0.0/8,false
64501,172.16.0.0/12,false
64502,192.0.2.0/24,false
64503,198.51.100.0/24,false
64504,203.0.113.0/24,false`,
                targetAsns: [64501, 64502]
            }
        ];

        // Initialize demo cards
        function initializeDemo() {
            const grid = document.getElementById('demoGrid');

            SIMULATIONS.forEach((sim, index) => {
                const card = document.createElement('div');
                card.className = 'demo-card';
                card.innerHTML = `
                    <h3>${sim.name}</h3>
                    <p>${sim.description}</p>
                    <button onclick="showSimulation(${index})">View Simulation</button>
                `;
                grid.appendChild(card);
            });
        }

        function showSimulation(index) {
            const sim = SIMULATIONS[index];
            const targetAsn = sim.targetAsns[Math.floor(Math.random() * sim.targetAsns.length)];

            // Count stats
            const ases = new Set();
            const lines = sim.caida.split('\n').filter(l => l && !l.startsWith('#'));
            lines.forEach(line => {
                const parts = line.split('|');
                if (parts.length >= 2) {
                    ases.add(parts[0]);
                    ases.add(parts[1]);
                }
            });

            // Display results
            document.getElementById('simName').textContent = sim.name;
            document.getElementById('targetASN').textContent = targetAsn;

            // Stats
            const statsHtml = `
                <div class="stat">
                    <div class="stat-value">${ases.size}</div>
                    <div class="stat-label">Autonomous Systems</div>
                </div>
                <div class="stat">
                    <div class="stat-value">${lines.length}</div>
                    <div class="stat-label">Relationships</div>
                </div>
            `;
            document.getElementById('statsContainer').innerHTML = statsHtml;

            // Topology and announcements
            document.getElementById('topologyInfo').textContent = sim.caida;
            document.getElementById('announcementsInfo').textContent = sim.announcements;

            // Show results
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeDemo);
    </script>
</body>
</html>
